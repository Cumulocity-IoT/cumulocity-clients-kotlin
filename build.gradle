buildscript {
    repositories {
        mavenCentral()
		google()
    }
    dependencies {
        classpath "com.android.tools.build:gradle:$androidVersion"
    }
}

plugins {
	id 'org.jetbrains.kotlin.android' version "$kotlinVersion"
	id 'com.android.library' version "$androidVersion"
}

repositories {
    google()
    mavenCentral()
}

java.toolchain.languageVersion.set(JavaLanguageVersion.of(20))

android {
    compileSdk 33
	namespace "com.cumulocity.client"
    defaultConfig {
        minSdkVersion 19
		targetSdkVersion 33
		versionCode 270
		versionName "10.18.0"

		testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
	}

    	libraryVariants.all { variant ->
		variant.packageLibraryProvider.configure { task ->
	    		task.archiveFileName.set("cumulocity-clients-kotlin-${variant.name}-${defaultConfig.versionName}-${defaultConfig.versionCode}.aar")
		}
    	}

	buildTypes {
		release {
			minifyEnabled true
			proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
		}
	}
}

dependencies {
	implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion"
	implementation "org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion"
	api "com.squareup.retrofit2:retrofit:$retrofitVersion"
	api "com.squareup.retrofit2:converter-gson:$retrofitVersion"
	api "com.squareup.retrofit2:converter-scalars:$retrofitVersion"

	testImplementation "junit:junit:$junitVersion"
}
